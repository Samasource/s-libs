<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>PersistentStore | @s-libs/signal-store</title><meta name="description" content="Documentation for @s-libs/signal-store"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@s-libs/signal-store</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">@s-libs/signal-store</a></li><li><a href="PersistentStore.html">PersistentStore</a></li></ul><h1>Class PersistentStore&lt;State, Persisted&gt;</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>A store that is automatically saved to and restored from local storage. This is suitable for small stores that can very quickly be (de)serialized to/from JSON without any noticeable delay.</p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyState</span><span class="hl-1"> </span><span class="hl-0">implements</span><span class="hl-1"> </span><span class="hl-2">VersionedObject</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">_version</span><span class="hl-1"> = </span><span class="hl-4">1</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">// eslint-disable-next-line camelcase -- will fix in next version</span><br/><span class="hl-1">  </span><span class="hl-3">my_state_key</span><span class="hl-1"> = </span><span class="hl-6">&#39;my default value&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyStore</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">PersistentStore</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-0">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">super</span><span class="hl-1">(</span><span class="hl-6">&#39;myPersistenceKey&#39;</span><span class="hl-1">, </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyState</span><span class="hl-1">());</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">store</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyStore</span><span class="hl-1">();</span><br/><span class="hl-7">store</span><span class="hl-1">(</span><span class="hl-6">&#39;my_state_key&#39;</span><span class="hl-1">).</span><span class="hl-3">state</span><span class="hl-1"> =</span><span class="hl-6">&#39;my persisted value&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// the user leaves the page and comes back later ...</span><br/><span class="hl-3">TestBed</span><span class="hl-1">.</span><span class="hl-7">flushEffects</span><span class="hl-1">();</span><br/><br/><span class="hl-3">store</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyStore</span><span class="hl-1">();</span><br/><span class="hl-7">expect</span><span class="hl-1">(</span><span class="hl-7">store</span><span class="hl-1">(</span><span class="hl-6">&#39;my_state_key&#39;</span><span class="hl-1">).</span><span class="hl-3">state</span><span class="hl-1">).</span><span class="hl-7">toBe</span><span class="hl-1">(</span><span class="hl-6">&#39;my persisted value&#39;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>At this point, if you change <code>_version</code> the store will be reset to the default state. This is a convenience during initial development of your app. Once it is released to real users, you will want to use a MigrationManager to avoid wiping out your users&#39; data:</p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyState</span><span class="hl-1"> </span><span class="hl-0">implements</span><span class="hl-1"> </span><span class="hl-2">VersionedObject</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">_version</span><span class="hl-1"> = </span><span class="hl-4">2</span><span class="hl-1">; </span><span class="hl-5">// bump version to 2</span><br/><span class="hl-1">  </span><span class="hl-3">myStateKey</span><span class="hl-1"> = </span><span class="hl-6">&#39;my default value&#39;</span><span class="hl-1">; </span><span class="hl-5">// schema change: my_state_key =&gt; myStateKey</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyMigrationManager</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">MigrationManager</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-0">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-7">registerMigration</span><span class="hl-1">(</span><span class="hl-4">1</span><span class="hl-1">, </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">#migrateFromV1</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  #</span><span class="hl-7">migrateFromV1</span><span class="hl-1">(</span><span class="hl-3">oldState</span><span class="hl-1">: </span><span class="hl-2">any</span><span class="hl-1">): </span><span class="hl-2">any</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> { </span><span class="hl-3">_version:</span><span class="hl-1"> </span><span class="hl-4">2</span><span class="hl-1">, </span><span class="hl-3">myStateKey:</span><span class="hl-1"> </span><span class="hl-3">oldState</span><span class="hl-1">.</span><span class="hl-3">my_state_key</span><span class="hl-1"> };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyStore</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">PersistentStore</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-0">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-5">// pass in our new `MyMigrationManager`</span><br/><span class="hl-1">    </span><span class="hl-0">super</span><span class="hl-1">(</span><span class="hl-6">&#39;myPersistenceKey&#39;</span><span class="hl-1">, </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyState</span><span class="hl-1">(), {</span><br/><span class="hl-1">      </span><span class="hl-3">migrator:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyMigrationManager</span><span class="hl-1">(),</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// the store gets the value persisted from version 1 in our previous example</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-9">store</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyStore</span><span class="hl-1">();</span><br/><span class="hl-7">expect</span><span class="hl-1">(</span><span class="hl-7">store</span><span class="hl-1">(</span><span class="hl-6">&#39;myStateKey&#39;</span><span class="hl-1">).</span><span class="hl-3">state</span><span class="hl-1">).</span><span class="hl-7">toBe</span><span class="hl-1">(</span><span class="hl-6">&#39;my persisted value&#39;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>If you want to persist something a little different from what is in the store, for example to omit some properties, use a <a href="../interfaces/PersistenceCodec.html" class="tsd-kind-interface"><code>PersistenceCodec</code></a>:</p>
<pre><code class="language-ts"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyState</span><span class="hl-1"> </span><span class="hl-0">implements</span><span class="hl-1"> </span><span class="hl-2">VersionedObject</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">_version</span><span class="hl-1"> = </span><span class="hl-4">1</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-3">sessionStart</span><span class="hl-1"> = </span><span class="hl-3">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><span class="hl-0">type</span><span class="hl-1"> </span><span class="hl-2">Persisted</span><span class="hl-1"> = </span><span class="hl-2">Omit</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">, </span><span class="hl-6">&#39;sessionStart&#39;</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyCodec</span><span class="hl-1"> </span><span class="hl-0">implements</span><span class="hl-1"> </span><span class="hl-2">PersistenceCodec</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">, </span><span class="hl-2">Persisted</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">encode</span><span class="hl-1">(</span><span class="hl-3">left</span><span class="hl-1">: </span><span class="hl-2">MyState</span><span class="hl-1">): </span><span class="hl-2">Persisted</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-7">omit</span><span class="hl-1">(</span><span class="hl-3">left</span><span class="hl-1">, </span><span class="hl-6">&#39;sessionStart&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">decode</span><span class="hl-1">(</span><span class="hl-3">right</span><span class="hl-1">: </span><span class="hl-2">Persisted</span><span class="hl-1">): </span><span class="hl-2">MyState</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> { ...</span><span class="hl-3">right</span><span class="hl-1">, </span><span class="hl-3">sessionStart:</span><span class="hl-1"> </span><span class="hl-3">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">() };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-2">MyStore</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-2">PersistentStore</span><span class="hl-1">&lt;</span><span class="hl-2">MyState</span><span class="hl-1">, </span><span class="hl-2">Persisted</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-0">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">super</span><span class="hl-1">(</span><span class="hl-6">&#39;myPersistenceKey&#39;</span><span class="hl-1">, </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyState</span><span class="hl-1">(), { </span><span class="hl-3">codec:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyCodec</span><span class="hl-1">() });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-9">session1Start</span><span class="hl-1"> = </span><span class="hl-3">Date</span><span class="hl-1">.</span><span class="hl-7">now</span><span class="hl-1">();</span><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">store</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyStore</span><span class="hl-1">();</span><br/><span class="hl-7">expect</span><span class="hl-1">(</span><span class="hl-7">store</span><span class="hl-1">(</span><span class="hl-6">&#39;sessionStart&#39;</span><span class="hl-1">).</span><span class="hl-3">state</span><span class="hl-1">).</span><span class="hl-7">toBe</span><span class="hl-1">(</span><span class="hl-3">session1Start</span><span class="hl-1">);</span><br/><span class="hl-7">expect</span><span class="hl-1">(</span><span class="hl-3">localStorage</span><span class="hl-1">.</span><span class="hl-7">getItem</span><span class="hl-1">(</span><span class="hl-6">&#39;myPersistenceKey&#39;</span><span class="hl-1">)).</span><span class="hl-7">toBe</span><span class="hl-1">(</span><span class="hl-6">&#39;{&quot;_version&quot;:1}&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// the user leaves the page and comes back later...</span><br/><br/><span class="hl-7">tick</span><span class="hl-1">(</span><span class="hl-4">300_000</span><span class="hl-1">); </span><span class="hl-5">// 5 minutes pass</span><br/><span class="hl-3">store</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-7">MyStore</span><span class="hl-1">();</span><br/><span class="hl-7">expect</span><span class="hl-1">(</span><span class="hl-7">store</span><span class="hl-1">(</span><span class="hl-6">&#39;sessionStart&#39;</span><span class="hl-1">).</span><span class="hl-3">state</span><span class="hl-1">).</span><span class="hl-7">toBe</span><span class="hl-1">(</span><span class="hl-3">session1Start</span><span class="hl-1"> + </span><span class="hl-4">300_000</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
</div><div class="tsd-comment tsd-typography"></div></section> <section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="State" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">State</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">VersionedObject</span></span></li><li><span><a id="Persisted" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Persisted</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">VersionedObject</span> = <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span></li></ul></section> <section class="tsd-panel tsd-hierarchy"><h4>Hierarchy (<a class="link" href="../hierarchy.html#PersistentStore">view full</a>)</h4><ul class="tsd-hierarchy"><li><a href="RootStore.html" class="tsd-signature-type tsd-kind-class">RootStore</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><ul class="tsd-hierarchy"><li><span class="target">PersistentStore</span></li></ul></li></ul></section><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="PersistentStore" class="tsd-anchor"></a><span class="tsd-kind-call-signature">Persistent<wbr/>Store</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#PersistentStore.K">K</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">attr</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">IfCouldBe</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">Nil</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/ReadonlyStore.html" class="tsd-signature-type tsd-kind-interface">ReadonlyStore</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#RootStore.K">K</a><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#RootStore.K">K</a><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#PersistentStore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="PersistentStore.K" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">K</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">symbol</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">attr</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#RootStore.K">K</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">IfCouldBe</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">Nil</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/ReadonlyStore.html" class="tsd-signature-type tsd-kind-interface">ReadonlyStore</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#RootStore.K">K</a><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#RootStore.K">K</a><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/utils/persistent-store.ts#L118">projects/signal-store/src/lib/utils/persistent-store.ts:118</a></li></ul></aside></li><li class="tsd-signature tsd-anchor-link"><a id="PersistentStore-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">Persistent<wbr/>Store</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">IfCouldBe</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">Nil</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/ReadonlyStore.html" class="tsd-signature-type tsd-kind-interface">ReadonlyStore</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-keyword">keyof </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-keyword">keyof </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#PersistentStore-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag ts-flagRest">Rest</code> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <span class="tsd-signature-symbol">[</span>attr<span class="tsd-signature-symbol">: </span><span class="tsd-signature-keyword">keyof </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">]</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">IfCouldBe</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">Nil</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/ReadonlyStore.html" class="tsd-signature-type tsd-kind-interface">ReadonlyStore</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-keyword">keyof </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">, </span><a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[</span><span class="tsd-signature-keyword">keyof </span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">]</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/utils/persistent-store.ts#L118">projects/signal-store/src/lib/utils/persistent-store.ts:118</a></li></ul></aside></li></ul></section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-index-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="PersistentStore.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="PersistentStore.html#assign" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>assign</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="PersistentStore.html#nonNull" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>non<wbr/>Null</span></a>
<a href="PersistentStore.html#state-2" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>state</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="PersistentStore.html#mutate" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>mutate</span></a>
<a href="PersistentStore.html#set" class="tsd-index-link tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set</span></a>
<a href="PersistentStore.html#update" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update</span></a>
</div></section></div></details></section></section><section class="tsd-panel-group tsd-member-group"><h2>Constructors</h2><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_PersistentStore" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Persistent<wbr/>Store</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">persistenceKey</span>, <span class="tsd-kind-parameter">defaultState</span>, <span class="tsd-kind-parameter">__namedParameters</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="PersistentStore.html" class="tsd-signature-type tsd-kind-class">PersistentStore</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span><a href="#constructor.new_PersistentStore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Must be instantiated in an injection context. This should naturally be the case for subclasses that are services (which is the common case).</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="constructor.new_PersistentStore.State-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">State</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">VersionedObject</span></span></li><li><span><a id="constructor.new_PersistentStore.Persisted-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Persisted</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">VersionedObject</span> = <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">persistenceKey</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>the key in local storage at which to persist the state</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">defaultState</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span><div class="tsd-comment tsd-typography"><p>used when the state has not been persisted yet</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">__namedParameters</span>: <span class="tsd-signature-symbol">{ </span><br/><span>    </span><span class="tsd-kind-property">codec</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../interfaces/PersistenceCodec.html" class="tsd-signature-type tsd-kind-interface">PersistenceCodec</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span><br/><span>    </span><span class="tsd-kind-property">migrator</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">MigrationManager</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">; </span><br/><span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol"> = {}</span></span><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-kind-property">codec</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="../interfaces/PersistenceCodec.html" class="tsd-signature-type tsd-kind-interface">PersistenceCodec</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>used to persist a different format than what is kept in the store</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5><span class="tsd-kind-property">migrator</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">MigrationManager</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><p>used to update state that was at a lower VersionedObject._version when it was persisted</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <a href="PersistentStore.html" class="tsd-signature-type tsd-kind-class">PersistentStore</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.Persisted-1">Persisted</a><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="RootStore.html">RootStore</a>.<a href="RootStore.html#constructor">constructor</a></p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/utils/persistent-store.ts#L130">projects/signal-store/src/lib/utils/persistent-store.ts:130</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Properties</h2><section class="tsd-panel tsd-member tsd-is-inherited"><a id="assign" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>assign</span><a href="#assign" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">assign</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">IfCouldBe</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Nil</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Primitive</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">never</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">value</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol"> = ...</span></div><div class="tsd-comment tsd-typography"><p>Assigns the given values to the state of this store object. The resulting state will be like <code>Object.assign(store.state, value)</code>.</p>
</div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">value</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">value</span>: <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">&gt;</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="RootStore.html">RootStore</a>.<a href="RootStore.html#assign">assign</a></p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L19">projects/signal-store/src/lib/abstract-store.ts:19</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group"><h2>Accessors</h2><section class="tsd-panel tsd-member tsd-is-inherited"><a id="nonNull" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>non<wbr/>Null</span><a href="#nonNull" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature" id="nonNull.nonNull-1"><span class="tsd-signature-keyword">get</span> nonNull<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type tsd-kind-type-parameter">T</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <a href="../interfaces/Store.html" class="tsd-signature-type tsd-kind-interface">Store</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">NonNullable</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type tsd-kind-type-parameter">T</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><aside class="tsd-sources"><p>Inherited from RootStore.nonNull</p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L37">projects/signal-store/src/lib/abstract-store.ts:37</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="state-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>state</span><a href="#state-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature" id="state-2.state-3"><span class="tsd-signature-keyword">get</span> state<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type tsd-kind-type-parameter">T</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Get the current state of this store object. This is backed by a signal, so it will trigger change detection when accessed in templates, etc.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type tsd-kind-type-parameter">T</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from RootStore.state</p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L44">projects/signal-store/src/lib/abstract-store.ts:44</a></li></ul></aside></li><li class="tsd-signature" id="state-2.state-4"><span class="tsd-signature-keyword">set</span> state<span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">value</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Change the value of this store. Following the pattern of immutable objects, the parent store will also update with shallow copy but with this value swapped in, and so on for all ancestors.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">value</span>: <span class="tsd-signature-type tsd-kind-type-parameter">T</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from RootStore.state</p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L51">projects/signal-store/src/lib/abstract-store.ts:51</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Methods</h2><section class="tsd-panel tsd-member tsd-is-inherited"><a id="mutate" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>mutate</span><a href="#mutate" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="mutate.mutate-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">mutate</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#mutate.mutate-1.A">A</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">func</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#mutate.mutate-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs <code>func</code> on a shallow clone of the state, replacing the state with the clone. The first argument to <code>func</code> will be the cloned state, followed by the arguments in <code>args</code>.</p>
<p>WARNING: You SHOULD NOT use a function that will mutate nested objects within the state.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="mutate.mutate-1.A" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">A</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">func</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">state</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span></span><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">state</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">state</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span></li><li><span><code class="tsd-tag ts-flagRest">Rest</code> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#mutate.mutate-1.A">A</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></li><li><span><code class="tsd-tag ts-flagRest">Rest</code> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#mutate.mutate-1.A">A</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="RootStore.html">RootStore</a>.<a href="RootStore.html#mutate">mutate</a></p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L69">projects/signal-store/src/lib/abstract-store.ts:69</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected tsd-is-inherited"><a id="set" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagProtected">Protected</code> <span>set</span><a href="#set" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="set.set-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">set</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">value</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#set.set-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">value</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><aside class="tsd-sources"><p>Inherited from <a href="RootStore.html">RootStore</a>.<a href="RootStore.html#set">set</a></p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/root-store.ts#L15">projects/signal-store/src/lib/root-store.ts:15</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="update" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>update</span><a href="#update" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="update.update-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">update</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#update.update-1.A-1">A</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">func</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#update.update-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Runs <code>func</code> on the state and replaces it with the return value. The first argument to <code>func</code> will be the state, followed by the arguments in <code>args</code>.</p>
<p>WARNING: You SHOULD NOT use a function that will mutate the state.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="update.update-1.A-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">A</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">func</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">state</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a><span class="tsd-signature-symbol">)</span></span><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">state</span>, <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">state</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></span></li><li><span><code class="tsd-tag ts-flagRest">Rest</code> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#update.update-1.A-1">A</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a class="tsd-signature-type tsd-kind-type-parameter" href="PersistentStore.html#constructor.new_PersistentStore.State-1">State</a></h4></li></ul></li></ul></li><li><span><code class="tsd-tag ts-flagRest">Rest</code> <span class="tsd-signature-symbol">...</span><span class="tsd-kind-parameter">args</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="RootStore.html#update.update-1.A-1">A</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="RootStore.html">RootStore</a>.<a href="RootStore.html#update">update</a></p><ul><li>Defined in <a href="https://github.com/simontonsoftware/s-libs/blob/master/projects/signal-store/src/lib/abstract-store.ts#L60">projects/signal-store/src/lib/abstract-store.ts:60</a></li></ul></aside></li></ul></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a><a href="#assign" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>assign</span></a><a href="#nonNull" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>non<wbr/>Null</span></a><a href="#state-2" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>state</span></a><a href="#mutate" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>mutate</span></a><a href="#set" class="tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>set</span></a><a href="#update" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@s-libs/signal-store</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>